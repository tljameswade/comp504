package sq6_kt21.server.controller;

import java.awt.EventQueue;

import sq6_kt21.server.model.IServerModel2ViewAdpt;
import sq6_kt21.server.model.ServerModel;
import sq6_kt21.server.view.IServerView2ModelAdpt;
import sq6_kt21.server.view.ServerView;

public class ServerController {
	
	private ServerModel serverModel;
	
	private ServerView serverView;
	
	public ServerController(){
		serverView = new ServerView(new IServerView2ModelAdpt() {
			
			@Override
			public void startGameView() {
				serverModel.startGameView();
				
			}
			
			@Override
			public void broadcast(String msg) {
				serverModel.broadcast(msg);
				
			}
			
			@Override
			public void assignTeams() {
				serverModel.assignTeams();
				
			}
		});
		
		serverModel = new ServerModel(new IServerModel2ViewAdpt() {
			
			@Override
			public void appendView(String msg) {
				serverView.appendView(msg);
				
			}

			@Override
			public void setRemoteHost(String hostAddress) {
				serverView.setGUITitle("IP:" + hostAddress);
				
			}
		});
		
	}
	
	/**
	 * start the whole chatApp
	 */
	public void start() {
		serverModel.start();
		serverView.start();
	}
	
	/**
	 * Launch the application.
	 */
	public static void main(String[] args) {
		EventQueue.invokeLater(new Runnable() {
			public void run() {
				(new ServerController()).start();
			}
		});
	}
}
